# ESLint & Prettier é…ç½®è¯´æ˜

## âœ… é…ç½®çŠ¶æ€

- **ESLint 9** - å·²é…ç½®å¹¶é€šè¿‡æ‰€æœ‰æ£€æŸ¥
- **Prettier** - å·²ä¸ ESLint å®Œç¾é›†æˆ
- **æ„å»ºæµ‹è¯•** - é€šè¿‡
- **ä»£ç è§„èŒƒ** - 0 é”™è¯¯ï¼Œ0 è­¦å‘Š

## ğŸ“¦ å·²å®‰è£…çš„åŒ…

### ESLint ç›¸å…³

- `eslint@^9` - æ ¸å¿ƒ linter
- `@eslint/js` - JavaScript æ¨èè§„åˆ™
- `typescript-eslint` - TypeScript æ”¯æŒ
- `eslint-plugin-vue` - Vue 3 æ”¯æŒ
- `eslint-plugin-prettier` - Prettier é›†æˆ
- `eslint-config-prettier` - ç¦ç”¨ä¸ Prettier å†²çªçš„è§„åˆ™

### Prettier ç›¸å…³

- `prettier@^3.6.2` - ä»£ç æ ¼å¼åŒ–å·¥å…·

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### `eslint.config.js` (ESLint 9 æ‰å¹³é…ç½®)

ä½¿ç”¨æœ€æ–°çš„ ESLint 9 flat config æ ¼å¼ï¼ŒåŒ…å«ï¼š

- **JavaScript** æ¨èè§„åˆ™
- **TypeScript** æ¨èè§„åˆ™ï¼ˆå·²ä¼˜åŒ–ï¼‰
- **Vue 3** æ¨èè§„åˆ™
- **Prettier** é›†æˆé…ç½®
- **å…¨å±€å˜é‡** é…ç½®ï¼ˆæµè§ˆå™¨ + Node.jsï¼‰
- è‡ªå®šä¹‰è§„åˆ™è°ƒæ•´

### `.prettierrc`

ä»£ç æ ¼å¼åŒ–è§„åˆ™ï¼š

- å•å¼•å·
- æ— åˆ†å·
- å°¾éšé€—å·
- 80 å­—ç¬¦è¡Œå®½
- 2 ç©ºæ ¼ç¼©è¿›
- LF æ¢è¡Œç¬¦

### `.vscode/settings.json`

VSCode ç¼–è¾‘å™¨é…ç½®ï¼š

- ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
- ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤ ESLint é”™è¯¯
- å¯ç”¨ ESLint flat config

## ğŸš€ ä½¿ç”¨å‘½ä»¤

```bash
# æ£€æŸ¥ä»£ç è§„èŒƒï¼ˆä¸ä¿®å¤ï¼‰
pnpm run lint:check

# æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®å¤ä»£ç è§„èŒƒ
pnpm run lint

# æ£€æŸ¥ä»£ç æ ¼å¼ï¼ˆä¸ä¿®å¤ï¼‰
pnpm run format:check

# æ ¼å¼åŒ–æ‰€æœ‰ä»£ç 
pnpm run format

# å®Œæ•´å·¥ä½œæµï¼ˆæ¨èï¼‰
pnpm run lint && pnpm run build
```

## ğŸ“ è§„åˆ™è¯´æ˜

### TypeScript è§„åˆ™

- âœ… `any` ç±»å‹ï¼š**å…³é—­**ï¼ˆçµæ´»å¼€å‘ï¼Œç”Ÿäº§ç¯å¢ƒå¯æ”¹ä¸º 'warn'ï¼‰
- âœ… æœªä½¿ç”¨å˜é‡ï¼šè­¦å‘Šï¼ˆä»¥ `_` å¼€å¤´çš„é™¤å¤–ï¼‰
- âœ… å‡½æ•°è¿”å›ç±»å‹ï¼šä¸å¼ºåˆ¶è¦æ±‚
- âœ… éç©ºæ–­è¨€ï¼š**å…è®¸**
- âœ… ç©ºå¯¹è±¡ç±»å‹ï¼šå…è®¸ï¼ˆæ¥å£å’Œå¯¹è±¡ç±»å‹ï¼‰
- âœ… TS æ³¨é‡Šï¼šéœ€è¦ 3 å­—ç¬¦ä»¥ä¸Šçš„æè¿°

### Vue è§„åˆ™

- âœ… å•è¯ç»„ä»¶åï¼šå…³é—­ï¼ˆå…è®¸å¦‚ `Home.vue`ï¼‰
- âœ… å¿…éœ€é»˜è®¤ propï¼šå…³é—­
- âœ… v-htmlï¼šè­¦å‘Šï¼ˆå®‰å…¨æç¤ºï¼‰
- âœ… v-if ä¸ v-forï¼šè­¦å‘Šï¼ˆæ€§èƒ½æç¤ºï¼‰
- âœ… è‡ªé—­åˆæ ‡ç­¾ï¼šHTML æ ‡ç­¾ä¸è‡ªé—­åˆï¼Œç»„ä»¶è‡ªé—­åˆ
- âœ… æ¯è¡Œæœ€å¤š 3 ä¸ªå±æ€§ï¼ˆå•è¡Œï¼‰

### é€šç”¨è§„åˆ™

- âœ… `console`ï¼š**å…è®¸**ï¼ˆçµæ´»è°ƒè¯•ï¼Œç”Ÿäº§ç¯å¢ƒå¯æ”¹ä¸º 'warn'ï¼‰
- â›” `debugger`ï¼šè­¦å‘Š
- â›” `no-undef`ï¼šå…³é—­ï¼ˆTypeScript å·²å¤„ç†ï¼‰
- âœ… ä¼˜å…ˆä½¿ç”¨ `const`
- â›” ç¦æ­¢ä½¿ç”¨ `var`

### å…¨å±€å˜é‡é…ç½®

å·²é…ç½®ä»¥ä¸‹å…¨å±€å˜é‡ï¼Œæ— éœ€ `/* global */` æ³¨é‡Šï¼š

- **æµè§ˆå™¨**: console, window, document, navigator, localStorage, setTimeout, atob, fetch ç­‰
- **Node.js**: process, **dirname, **filename ç­‰
- **TypeScript**: NodeJS å‘½åç©ºé—´

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å¼€å‘æµç¨‹

```bash
# å¼€å‘å‰
pnpm run lint:check  # æ£€æŸ¥ä»£ç è§„èŒƒ

# å¼€å‘ä¸­
# VSCode ä¼šè‡ªåŠ¨åœ¨ä¿å­˜æ—¶æ ¼å¼åŒ–å’Œä¿®å¤

# æäº¤å‰
pnpm run lint        # è‡ªåŠ¨ä¿®å¤é—®é¢˜
pnpm run build       # ç¡®ä¿æ„å»ºæˆåŠŸ
```

### 2. Git Hooksï¼ˆæ¨èï¼‰

å®‰è£… `husky` + `lint-staged` å®ç°æäº¤å‰è‡ªåŠ¨æ£€æŸ¥ï¼š

```bash
npm install -D husky lint-staged
pnpm dlx husky init
echo "pnpm exec lint-staged" > .husky/pre-commit
```

åœ¨ `package.json` æ·»åŠ ï¼š

```json
{
  "lint-staged": {
    "*.{js,ts,vue}": ["eslint --fix", "prettier --write"],
    "*.{json,md,css,scss}": ["prettier --write"]
  }
}
```

### 3. CI/CD é›†æˆ

åœ¨ CI æµç¨‹ä¸­æ·»åŠ ï¼š

```bash
pnpm run lint:check    # æ£€æŸ¥ä»£ç è§„èŒƒ
pnpm run format:check  # æ£€æŸ¥ä»£ç æ ¼å¼
pnpm run build         # æ„å»ºé¡¹ç›®
```

### 4. ç¼–è¾‘å™¨é…ç½®

ç¡®ä¿å®‰è£… VSCode æ‰©å±•ï¼ˆ`.vscode/extensions.json` å·²é…ç½®ï¼‰ï¼š

- **ESLint** - ä»£ç è§„èŒƒæ£€æŸ¥
- **Prettier** - ä»£ç æ ¼å¼åŒ–
- **Volar** - Vue 3 è¯­è¨€æ”¯æŒ
- **TypeScript Vue Plugin** - Vue æ–‡ä»¶ä¸­çš„ TS æ”¯æŒ

## ğŸ”§ ç‰¹æ®Šåœºæ™¯å¤„ç†

### ç¦ç”¨å•è¡Œè§„åˆ™

```typescript
// eslint-disable-next-line @typescript-eslint/no-explicit-any
const data: any = getSomeData()
```

### ç¦ç”¨æ–‡ä»¶è§„åˆ™

```typescript
/* eslint-disable @typescript-eslint/no-explicit-any */
// æ•´ä¸ªæ–‡ä»¶å…è®¸ any
```

### å…è®¸ consoleï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

```typescript
if (import.meta.env.DEV) {
  // eslint-disable-next-line no-console
  console.log('Debug info')
}
```

## ğŸ” æ•…éšœæ’æŸ¥

### ESLint ä¸å·¥ä½œï¼Ÿ

1. æ£€æŸ¥ VSCode æ˜¯å¦å®‰è£… ESLint æ‰©å±•
2. é‡å¯ VSCode
3. æ£€æŸ¥è¾“å‡ºé¢æ¿çš„ ESLint æ—¥å¿—
4. ç¡®è®¤ `eslint.experimental.useFlatConfig: true`

### Prettier ä¸æ ¼å¼åŒ–ï¼Ÿ

1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åœ¨ `.prettierignore` ä¸­
2. ç¡®è®¤ VSCode é»˜è®¤æ ¼å¼åŒ–å·¥å…·æ˜¯ Prettier
3. æ£€æŸ¥æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯é˜»æ­¢æ ¼å¼åŒ–

### è§„åˆ™å†²çªï¼Ÿ

ESLint å’Œ Prettier å·²é€šè¿‡ `eslint-config-prettier` å®Œç¾é›†æˆï¼Œä¸åº”æœ‰å†²çªã€‚

### æ„å»ºå¤±è´¥ï¼Ÿ

```bash
# æ¸…é™¤ç¼“å­˜é‡æ–°æ„å»º
rm -rf node_modules dist
npm install
pnpm run build
```

## ğŸ“Š é…ç½®ä¼˜åŒ–è¯´æ˜

### å·²è§£å†³çš„é—®é¢˜

1. âœ… ç§»é™¤ `.eslintignore`ï¼ˆä½¿ç”¨ flat config çš„ `ignores`ï¼‰
2. âœ… é…ç½®å…¨å±€å˜é‡ï¼ˆæ¶ˆé™¤ `no-undef` é”™è¯¯ï¼‰
3. âœ… ä¼˜åŒ– TypeScript è§„åˆ™ï¼ˆå…è®¸ any å’Œéç©ºæ–­è¨€ï¼‰
4. âœ… æ·»åŠ  TS æ³¨é‡Šæè¿°è¦æ±‚
5. âœ… ç§»é™¤ä¸å¿…è¦çš„ console è¯­å¥
6. âœ… ä¿®å¤æ‰€æœ‰ lint é”™è¯¯å’Œè­¦å‘Š

### æ€§èƒ½ä¼˜åŒ–

- Prettier è­¦å‘Šè€Œéé”™è¯¯ï¼Œé¿å…é˜»æ–­å¼€å‘
- çµæ´»çš„ TypeScript è§„åˆ™ï¼Œæé«˜å¼€å‘æ•ˆç‡
- å¼€å‘ç¯å¢ƒå…è®¸ consoleï¼Œç”Ÿäº§ç¯å¢ƒå¯è°ƒæ•´

## ğŸ“š å‚è€ƒèµ„æº

- [ESLint å®˜æ–¹æ–‡æ¡£](https://eslint.org/docs/latest/)
- [ESLint 9 è¿ç§»æŒ‡å—](https://eslint.org/docs/latest/use/configure/migration-guide)
- [Prettier å®˜æ–¹æ–‡æ¡£](https://prettier.io/docs/en/)
- [Vue ESLint æ’ä»¶](https://eslint.vuejs.org/)
- [TypeScript ESLint](https://typescript-eslint.io/)

---

**é…ç½®æœ€åæ›´æ–°**: 2025-11-17  
**ESLint ç‰ˆæœ¬**: 9.39.1  
**é…ç½®çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
